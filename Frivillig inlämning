#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include <string.h>

int comparison(char matchresult[], char rattrad[]);

int main(void)  {

    srand(time(NULL));
    char filnamn[2024];
    char rattrad[200];
	char matchresult[200];
    const char txt[4] = ".txt";
    
    printf("Enter in the name of your file and it will be solved: ");
    scanf("%s", filnamn);
    
    strcat(filnamn, txt);
    
    FILE *infil = fopen(filnamn, "w");
        if(infil == NULL)  {
            printf("There was an error creating your file.\n");   
            exit(1);             
        }
	
	printf("Din stryktipskupong: \n");
	
	
    for (int i=1; i<14; i++) {
        int j = rand() % 3;
            if (j == 1) {
                printf("Match %2d: 1\n",i);
                fprintf(infil,"%d",1);
            } else if (j == 0) {
                printf("Match %2d:   X\n",i);
				fprintf(infil,"%c",'X');
            } else {
                printf("Match %2d:     2\n",i);
				fprintf(infil,"%d",2);
            }
            if (i < 13) {
                 fprintf(infil, ",");
            }
    }
	
	fclose(infil);
	
	FILE *infil1 = fopen(filnamn, "r");
        if(infil1 == NULL)  {
            printf("There was an error reading your file.\n");   
            exit(1);             
        }
		while(!feof(infil1)) {
			fgets(matchresult, 200, infil1);
		}
		
	fclose(infil1);
	
    FILE *rattradcomparison = fopen("C:\\Users\\Sawball\\Documents\\C programmering\\C\\Debug\\RattRad.csv", "r");
        if (rattradcomparison == NULL) {
            printf("Couldn't open file\n");
            exit(-1);
        }
		
		while(!feof(rattradcomparison)) {
			fgets(rattrad, 200, rattradcomparison);
		}
		
	fclose(rattradcomparison);
		
		printf("Antal ratt: %d\n", comparison(matchresult, rattrad));	
}

int comparison(char matchresult[], char rattrad[]) {
    int antalRatt = 0;
    for (int i = 0; i < 26; i++) {
        if (matchresult[i] == rattrad[i]) {
            antalRatt++;
        }
    i++;
    }
    return(antalRatt);
}
